(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{77738:function(e,t,s){Promise.resolve().then(s.bind(s,49502))},49502:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var r=s(3827),n=s(64090),o=s(38525),i=s(17644),l=s(86644),c=s(17122),a=s(36959),d=s(64084),u=s(63048),h=s(98523),x=s(9960),f=s(21419),j=s(91698),y=s(21166),g=s(21890),p=s(43486),m=s(27226),b=s(71955),S=s(72704),w=s(84828),P=s(1077),T=s(9167),v=s(54003),C=s(71793),O=s(18696),k=s(13628),W=s(39312),E=s(90203),B=s(4691),A=s(26173),I=s(8792);function _(){let[e,t]=(0,n.useState)([]),[s,_]=(0,n.useState)(!0),[L,z]=(0,n.useState)(!1),[N,D]=(0,n.useState)(null),[M,F]=(0,n.useState)(null),{isOpen:H,onOpen:U,onClose:V}=(0,o.useDisclosure)(),J=(0,i.useToast)(),[R,Q]=(0,n.useState)("unknown"),[Y,q]=(0,n.useState)([]);(0,n.useEffect)(()=>{G(),$()},[]);let G=async()=>{try{_(!0);let e=await fetch("/api/sync"),s=await e.json();if(s.success)t(s.data||[]);else throw Error(s.error||"Failed to fetch posts")}catch(e){J({title:"Error",description:"Failed to fetch sync status",status:"error",duration:5e3,isClosable:!0})}finally{_(!1)}},K=async e=>{try{z(!0),D(null);let t=await fetch("/api/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})}),s=await t.json();if(s.success)D(s),J({title:"Sync Completed",description:s.message||"Successfully synced content",status:"success",duration:5e3,isClosable:!0}),await G();else throw Error(s.error)}catch(e){J({title:"Sync Failed",description:e instanceof Error?e.message:"Unknown error",status:"error",duration:5e3,isClosable:!0})}finally{z(!1)}},X=async t=>{try{let s=e.find(e=>e.id===t);if(!s)throw Error("Post not found");J({title:"Edit Post",description:"Edit the file: content/posts/".concat(t,"-").concat(s.slug,".md"),status:"info",duration:8e3,isClosable:!0})}catch(e){J({title:"Error",description:"Failed to open post for editing",status:"error",duration:5e3,isClosable:!0})}},Z=e=>e.wordpress_modified?e.needsSync?(0,r.jsx)(l.Badge,{colorScheme:"orange",children:"Needs Sync"}):(0,r.jsx)(l.Badge,{colorScheme:"green",children:"Synced"}):(0,r.jsx)(l.Badge,{colorScheme:"gray",children:"Local Only"}),$=async()=>{try{let e=await fetch("/api/test"),t=await e.json();Q(t.success?"working":"failed")}catch(e){console.error("Error checking auth status:",e instanceof Error?e.message:"Unknown error"),Q("failed")}},ee=async e=>{z(!0),q(t=>[...t,e]);try{let t=await fetch("/api/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"push_to_wordpress",slug:e})}),s=await t.json();if(s.success)J({title:"Sync Completed",description:'Successfully synced "'.concat(e,'" to WordPress!'),status:"success",duration:5e3,isClosable:!0}),await G();else throw Error(s.error)}catch(t){console.error("Sync error:",t),J({title:"Sync Failed",description:'Failed to sync "'.concat(e,'": ').concat(t instanceof Error?t.message:"Unknown error"),status:"error",duration:5e3,isClosable:!0})}finally{z(!1),q(t=>t.filter(t=>t!==e))}},et=async()=>{let t=e?e.filter(e=>"publish"===e.status):[];if(0===t.length){J({title:"No Posts to Sync",description:"No local posts found to sync to WordPress.",status:"info",duration:5e3,isClosable:!0});return}if(confirm("Sync ".concat(t.length," local posts to WordPress?")))try{z(!0);let e=await fetch("/api/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"sync_to_wordpress"})}),t=await e.json();if(t.success)J({title:"Bulk Sync Completed",description:t.message||"Successfully synced all local posts to WordPress",status:"success",duration:5e3,isClosable:!0}),await G();else throw Error(t.error)}catch(e){J({title:"Bulk Sync Failed",description:e instanceof Error?e.message:"Unknown error",status:"error",duration:5e3,isClosable:!0})}finally{z(!1)}};if(s)return(0,r.jsx)(c.Container,{maxW:"container.xl",py:8,children:(0,r.jsx)(a.Flex,{justify:"center",align:"center",minH:"400px",children:(0,r.jsx)(d.Spinner,{size:"xl",color:"orange.500"})})});let es=e?e.filter(e=>"publish"===e.status):[];return e&&e.filter(e=>"publish"!==e.status),(0,r.jsxs)(c.Container,{maxW:"container.xl",py:8,children:[(0,r.jsxs)(u.VStack,{spacing:8,align:"stretch",children:[(0,r.jsxs)(h.Box,{children:[(0,r.jsx)(x.Heading,{as:"h1",size:"xl",mb:2,children:"Content Management"}),(0,r.jsx)(f.Text,{color:"gray.600",children:"Manage and sync your blog content between WordPress and your local workspace."})]}),(0,r.jsxs)(h.Box,{children:[(0,r.jsx)(x.Heading,{as:"h2",size:"md",mb:4,children:"Sync Controls"}),(0,r.jsxs)(j.HStack,{spacing:4,wrap:"wrap",children:[(0,r.jsx)(y.Button,{leftIcon:(0,r.jsx)(g.Icon,{as:A._hL}),colorScheme:"blue",onClick:()=>K("sync_from_wordpress"),isLoading:L,loadingText:"Syncing...",children:"WordPress → Local"}),(0,r.jsx)(y.Button,{leftIcon:(0,r.jsx)(g.Icon,{as:A.Yjd}),colorScheme:"green",onClick:()=>K("sync_to_wordpress"),isLoading:L,loadingText:"Syncing...",isDisabled:"failed"===R,children:"Local → WordPress"}),(0,r.jsx)(y.Button,{leftIcon:(0,r.jsx)(g.Icon,{as:A.Qxo}),colorScheme:"orange",onClick:()=>K("sync_all"),isLoading:L,loadingText:"Syncing...",children:"Bi-directional Sync"}),(0,r.jsx)(y.Button,{leftIcon:(0,r.jsx)(g.Icon,{as:A.Bw1}),variant:"outline",onClick:G,isLoading:s,children:"Refresh Status"}),(0,r.jsxs)(y.Button,{leftIcon:(0,r.jsx)(g.Icon,{as:A.Yjd}),colorScheme:"purple",onClick:et,isDisabled:L||0===es.length||"failed"===R,isLoading:L,loadingText:"Syncing...",children:["Sync All Local Posts (",es.length,")"]})]})]}),N&&(0,r.jsxs)(p.Alert,{status:"info",children:[(0,r.jsx)(m.AlertIcon,{}),(0,r.jsxs)(h.Box,{children:[(0,r.jsx)(f.Text,{fontWeight:"bold",children:"Sync Results:"}),(0,r.jsx)(f.Text,{children:N.message}),N.data&&Array.isArray(N.data)&&(0,r.jsxs)(f.Text,{fontSize:"sm",mt:2,children:["Processed ",N.data.length," items"]}),N.data&&"object"==typeof N.data&&!Array.isArray(N.data)&&(0,r.jsxs)(u.VStack,{align:"start",spacing:1,mt:2,fontSize:"sm",children:[N.data.fromWordPress&&(0,r.jsxs)(f.Text,{children:["WordPress → Local: ",N.data.fromWordPress.length," items processed"]}),N.data.toWordPress&&(0,r.jsxs)(f.Text,{children:["Local → WordPress: ",N.data.toWordPress.length," items processed"]})]})]})]}),(0,r.jsxs)(h.Box,{children:[(0,r.jsx)(x.Heading,{as:"h2",size:"md",mb:4,children:"WordPress Custom API Status"}),(0,r.jsxs)(j.HStack,{spacing:4,children:[(0,r.jsx)(f.Text,{children:"Status:"}),(0,r.jsx)(l.Badge,{colorScheme:"working"===R?"green":"failed"===R?"red":"yellow",children:"working"===R?"✅ Operational":"failed"===R?"❌ Connection Issue":"⏳ Checking..."})]}),"failed"===R&&(0,r.jsxs)(p.Alert,{status:"warning",mt:4,children:[(0,r.jsx)(m.AlertIcon,{}),(0,r.jsxs)(h.Box,{children:[(0,r.jsx)(f.Text,{fontWeight:"bold",children:"WordPress API Connection Issue"}),(0,r.jsx)(f.Text,{children:"Unable to connect to WordPress custom API. Manual sync to WordPress is disabled."}),(0,r.jsxs)(f.Text,{mt:2,children:[(0,r.jsx)("strong",{children:"Check:"})," WordPress plugin installed, API key configured correctly"]})]})]}),"working"===R&&(0,r.jsxs)(p.Alert,{status:"success",mt:4,children:[(0,r.jsx)(m.AlertIcon,{}),(0,r.jsxs)(h.Box,{children:[(0,r.jsx)(f.Text,{fontWeight:"bold",children:"Custom WordPress API Active"}),(0,r.jsx)(f.Text,{children:"✅ Full bi-directional sync is operational!"}),(0,r.jsxs)(f.Text,{children:[(0,r.jsx)("strong",{children:"WordPress → Website:"})," Automatic via webhooks"]}),(0,r.jsxs)(f.Text,{children:[(0,r.jsx)("strong",{children:"Website → WordPress:"})," Manual push buttons available"]})]})]})]}),(0,r.jsxs)(h.Box,{children:[(0,r.jsxs)(x.Heading,{as:"h2",size:"md",mb:4,children:["Blog Posts (",e?e.length:0,")"]}),e&&0!==e.length?(0,r.jsxs)(b.Table,{variant:"simple",children:[(0,r.jsx)(S.Thead,{children:(0,r.jsxs)(w.Tr,{children:[(0,r.jsx)(P.Th,{children:"Title"}),(0,r.jsx)(P.Th,{children:"Status"}),(0,r.jsx)(P.Th,{children:"Sync Status"}),(0,r.jsx)(P.Th,{children:"Last Modified (Local)"}),(0,r.jsx)(P.Th,{children:"Last Modified (WordPress)"}),(0,r.jsx)(P.Th,{children:"Actions"})]})}),(0,r.jsx)(T.Tbody,{children:e&&e.map(e=>(0,r.jsxs)(w.Tr,{children:[(0,r.jsx)(v.Td,{children:(0,r.jsxs)(u.VStack,{align:"start",spacing:1,children:[(0,r.jsx)(f.Text,{fontWeight:"medium",children:e.title}),(0,r.jsxs)(f.Text,{fontSize:"sm",color:"gray.500",children:["/",e.slug]})]})}),(0,r.jsx)(v.Td,{children:(0,r.jsx)(l.Badge,{colorScheme:"publish"===e.status?"green":"gray",textTransform:"capitalize",children:e.status})}),(0,r.jsx)(v.Td,{children:Z(e)}),(0,r.jsx)(v.Td,{children:(0,r.jsx)(f.Text,{fontSize:"sm",children:new Date(e.local_modified).toLocaleString()})}),(0,r.jsx)(v.Td,{children:(0,r.jsx)(f.Text,{fontSize:"sm",children:e.wordpress_modified?new Date(e.wordpress_modified).toLocaleString():"Never"})}),(0,r.jsx)(v.Td,{children:(0,r.jsxs)(j.HStack,{spacing:2,children:[(0,r.jsx)(y.Button,{size:"sm",leftIcon:(0,r.jsx)(g.Icon,{as:A.vPQ}),onClick:()=>X(e.id||0),children:"Edit"}),(0,r.jsx)(I.default,{href:"/blog/".concat(e.slug),target:"_blank",children:(0,r.jsx)(y.Button,{size:"sm",variant:"outline",children:"View"})}),"publish"===e.status&&(0,r.jsx)(y.Button,{size:"sm",colorScheme:"green",onClick:()=>ee(e.slug),isDisabled:L||Y.includes(e.slug)||"failed"===R,isLoading:Y.includes(e.slug),loadingText:"Syncing...",children:"\uD83D\uDE80 Push to WordPress"})]})})]},e.slug))})]}):(0,r.jsxs)(p.Alert,{status:"info",children:[(0,r.jsx)(m.AlertIcon,{}),(0,r.jsxs)(h.Box,{children:[(0,r.jsx)(f.Text,{fontWeight:"bold",children:"No local posts found"}),(0,r.jsx)(f.Text,{children:"Run a WordPress → Local sync to pull posts from your WordPress site."})]})]})]}),(null==N?void 0:N.data)&&Array.isArray(N.data)&&N.data.some(e=>"conflict"===e.action)&&(0,r.jsxs)(p.Alert,{status:"warning",children:[(0,r.jsx)(m.AlertIcon,{}),(0,r.jsxs)(h.Box,{children:[(0,r.jsx)(f.Text,{fontWeight:"bold",children:"Conflicts Detected!"}),(0,r.jsx)(f.Text,{children:"Some posts have conflicts that need manual resolution."})]})]})]}),(0,r.jsxs)(C.Modal,{isOpen:H,onClose:V,size:"4xl",children:[(0,r.jsx)(O.ModalOverlay,{}),(0,r.jsxs)(k.ModalContent,{children:[(0,r.jsx)(W.ModalHeader,{children:"Edit Post"}),(0,r.jsx)(E.ModalCloseButton,{}),(0,r.jsx)(B.ModalBody,{pb:6,children:(0,r.jsx)(f.Text,{children:"Post editing interface will be implemented here."})})]})]})]})}},70158:function(e,t,s){"use strict";s.d(t,{w_:function(){return d}});var r=s(64090),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=r.createContext&&r.createContext(n),i=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach(function(t){var r,n;r=t,n=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function d(e){return t=>r.createElement(u,l({attr:a({},e.attr)},t),function e(t){return t&&t.map((t,s)=>r.createElement(t.tag,a({key:s},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var s,{attr:n,size:o,title:c}=e,d=function(e,t){if(null==e)return{};var s,r,n=function(e,t){if(null==e)return{};var s={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)s=o[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}(e,i),u=o||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:s,style:a(a({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==o?r.createElement(o.Consumer,null,e=>t(e)):t(n)}}},function(e){e.O(0,[956,966,792,204,766,971,69,744],function(){return e(e.s=77738)}),_N_E=e.O()}]);